{
  "id": "@kiyoung8/simulation_by_simpy_mcp",
  "displayName": "simulation_by_simpy_mcp",
  "description": "Simulate M/M/1, M/M/c, and manufacturing (MPS) systems to forecast wait times, utilization, and makespan. Compare separate versus pooled queues and get parameter recommendations to meet service targets. Analyze results with theory-backed metrics, schedule insights, and clear stability checks.",
  "createdAt": "2026-01-17T02:04:57.438Z",
  "links": {
    "homepage": "",
    "registry": "https://smithery.ai/server/@kiyoung8/simulation_by_simpy_mcp"
  },
  "connection": {
    "type": "http",
    "runtime": "node",
    "configSchema": {
      "description": "Schema for the /mcp endpoint configuration"
    }
  },
  "capabilities": [
    {
      "name": "validate_config",
      "description": "Validate M/M/1 queue configuration\n\nChecks if parameters are valid and system is stable (ρ < 1).\n\nArgs:\n    arrival_rate: λ (customers per time unit)\n    service_rate: μ (customers per time unit)\n    simulation_time: Duration of simulation\n\nReturns:\n    Validation results with stability analysis"
    },
    {
      "name": "calculate_metrics",
      "description": "Calculate theoretical M/M/1 performance metrics\n\nUses exact formulas to compute steady-state metrics.\n\nArgs:\n    arrival_rate: λ (customers per time unit)\n    service_rate: μ (customers per time unit)\n\nReturns:\n    Dictionary with theoretical performance metrics"
    },
    {
      "name": "run_simulation",
      "description": "Run M/M/1 queue simulation using SimPy\n\nLegacy tool for single-server simulation.\nFor multi-server, use run_mmc_simulation.\n\nArgs:\n    arrival_rate: λ (customers per time unit)\n    service_rate: μ (customers per time unit)\n    simulation_time: Duration of simulation\n    random_seed: Random seed (None for random)\n\nReturns:\n    Simulation and theoretical metrics"
    },
    {
      "name": "run_mmc_simulation",
      "description": "Run M/M/c queue simulation (supports 1 to n servers)\n\nThis tool can simulate:\n- M/M/1: Single server (num_servers=1)\n- M/M/2: Two servers (num_servers=2)\n- M/M/3: Three servers (num_servers=3)\n- M/M/c: Any number of servers\n\nArgs:\n    arrival_rate: λ (customers per time unit)\n    service_rate: μ (customers per time unit per server)\n    num_servers: c (number of parallel servers)\n    simulation_time: Duration of simulation\n    random_seed: Random seed (None for random)\n\nReturns:\n    Simulation and theoretical metrics for M/M/c system\n\nExample:\n    # Supermarket with 3 cashiers\n    run_mmc_simulation(\n        arrival_rate=12,    # 12 customers/min arrive\n        service_rate=5,     # Each cashier serves 5/min\n        num_servers=3       # 3 cashiers\n    )"
    },
    {
      "name": "compare_mm1_vs_mmc",
      "description": "Compare M/M/1 × c (separate queues) vs M/M/c (pooled queue)\n\nThis is the key tool for comparing:\n- Strategy A: c separate M/M/1 queues (distributed)\n- Strategy B: Single M/M/c queue (pooled)\n\nPerfect for supermarket/bank/coffee shop scenarios!\n\nArgs:\n    arrival_rate: Total arrival rate λ\n    service_rate_per_server: Service rate μ per server\n    num_servers: Number of servers c\n    simulation_time: Simulation duration\n\nReturns:\n    Comparison showing why pooled queue is better\n\nExample:\n    # 3 cashiers: separate vs pooled queues\n    compare_mm1_vs_mmc(\n        arrival_rate=12,\n        service_rate_per_server=5,\n        num_servers=3\n    )"
    },
    {
      "name": "analyze_cashier_problem",
      "description": "Analyze the supermarket cashier problem\n\nCompares separate queues vs single pooled queue for cashiers.\n\nArgs:\n    arrival_rate: New arrivals per minute\n    service_rate: Customers served per minute per cashier\n    num_cashiers: Number of cashiers\n\nReturns:\n    Complete analysis with recommendations"
    },
    {
      "name": "recommend_parameters",
      "description": "Recommend optimal parameters for queue system\n\nGiven constraints, suggests missing parameters.\n\nArgs:\n    target_utilization: Desired ρ (default: 0.8)\n    target_waiting_time: Desired Wq in time units\n    arrival_rate: Known λ (optional)\n    service_rate: Known μ (optional)\n    num_servers: Known c (optional)\n\nReturns:\n    Recommended configuration with analysis"
    },
    {
      "name": "run_mps_sim",
      "description": "Run Matrix Production System (MPS) simulation.\n\nThis implements MPS as defined in the KTH thesis (2025):\n- Grid layout with machines at fixed positions\n- MHV (Material Handling Vehicle) transport between machines\n- Manhattan distance for transport time calculation\n- Post-task buffer constraints\n- Task-machine eligibility constraints\n\nArgs:\n    config: Complete configuration dict (alternative to individual params)\n    layout: Grid layout {\"rows\": 3, \"cols\": 2, \"machine_positions\": {\"M1\": [0,0], ...}}\n    machines: List of machines [{\"id\": \"M1\", \"eligible_tasks\": [\"T1\", \"T2\"]}]\n    tasks: List of tasks [{\"id\": \"T1\", \"processing_time\": 20}]\n    products: List of products [{\"id\": \"A\", \"task_sequence\": [\"T1\",\"T3\"], \"quantity\": 1}]\n    mhv: MHV config {\"count\": 3, \"speed\": 1.0}\n    grid_distance: Distance between adjacent machines (meters)\n    buffer_capacity: Post-task buffer capacity per machine\n    random_seed: Random seed for reproducibility\n    output_format: Output format - \"default\" or \"schedule\" (for CP verification)\n        - \"default\": Standard format with task_schedule, mhv_schedule lists\n        - \"schedule\": CP-verification format with jobs grouped by job_id\n\nReturns:\n    Simulation results. Format depends on output_format:\n\n    \"default\" format:\n    - makespan: Total completion time\n    - task_schedule: List of task execution records\n    - mhv_schedule: List of transport records\n    - machine_utilization: Utilization per machine\n    - mhv_utilization: Utilization per MHV\n\n    \"schedule\" format (for CP verification):\n    - jobs: List of jobs with operations grouped by job_id\n    - transports: List of transport records\n    - calculated_makespan: Maximum end time\n\nExample (3×2 grid, 6 machines, 5 products):\n    run_mps_sim(\n        layout={\"rows\": 3, \"cols\": 2, \"machine_positions\": {\n            \"M1\": [0,0], \"M2\": [0,1], \"M3\": [1,0],\n            \"M4\": [1,1], \"M5\": [2,0], \"M6\": [2,1]\n        }},\n        machines=[\n            {\"id\": \"M1\", \"eligible_tasks\": [\"T1\", \"T2\"]},\n            {\"id\": \"M2\", \"eligible_tasks\": [\"T3\", \"T4\"]},\n            {\"id\": \"M3\", \"eligible_tasks\": [\"T5\", \"T6\"]},\n            {\"id\": \"M4\", \"eligible_tasks\": [\"T1\", \"T3\"]},\n            {\"id\": \"M5\", \"eligible_tasks\": [\"T2\", \"T5\"]},\n            {\"id\": \"M6\", \"eligible_tasks\": [\"T4\", \"T6\"]}\n        ],\n        tasks=[\n            {\"id\": \"T1\", \"processing_time\": 20},\n            {\"id\": \"T2\", \"processing_time\": 25},\n            {\"id\": \"T3\", \"processing_time\": 30},\n            {\"id\": \"T4\", \"processing_time\": 30},\n            {\"id\": \"T5\", \"processing_time\": 35},\n            {\"id\": \"T6\", \"processing_time\": 40}\n        ],\n        products=[\n            {\"id\": \"A\", \"task_sequence\": [\"T1\",\"T3\",\"T4\",\"T6\"], \"quantity\": 1},\n            {\"id\": \"B\", \"task_sequence\": [\"T1\",\"T2\",\"T4\",\"T5\"], \"quantity\": 1},\n            {\"id\": \"C\", \"task_sequence\": [\"T2\",\"T3\",\"T5\",\"T6\"], \"quantity\": 1},\n            {\"id\": \"D\", \"task_sequence\": [\"T6\",\"T5\",\"T1\",\"T3\"], \"quantity\": 1},\n            {\"id\": \"E\", \"task_sequence\": [\"T4\",\"T2\",\"T5\",\"T1\"], \"quantity\": 1}\n        ],\n        mhv={\"count\": 5, \"speed\": 1.0},\n        grid_distance=15.0,\n        buffer_capacity=2\n    )"
    },
    {
      "name": "calculate_mps_metrics",
      "description": "Calculate theoretical MPS metrics.\n\nEstimates manufacturing performance using analytical methods:\n- Total processing time per product\n- Minimum transport time (Manhattan distance)\n- Lower bound on makespan\n- Machine load analysis\n\nArgs:\n    machines: List of machines with eligible_tasks\n    tasks: List of tasks with processing_time\n    products: List of products with task_sequence and quantity\n\nReturns:\n    Theoretical estimates and analysis\n\nExample:\n    calculate_mps_metrics(\n        machines=[\n            {\"id\": \"M1\", \"eligible_tasks\": [\"T1\", \"T2\"], \"position\": [0,0]},\n            {\"id\": \"M2\", \"eligible_tasks\": [\"T3\", \"T4\"], \"position\": [0,1]}\n        ],\n        tasks=[\n            {\"id\": \"T1\", \"processing_time\": 20},\n            {\"id\": \"T2\", \"processing_time\": 25},\n            {\"id\": \"T3\", \"processing_time\": 30},\n            {\"id\": \"T4\", \"processing_time\": 30}\n        ],\n        products=[\n            {\"id\": \"A\", \"task_sequence\": [\"T1\", \"T3\"], \"quantity\": 1}\n        ]\n    )"
    },
    {
      "name": "analyze_mps_schedule",
      "description": "Analyze MPS simulation schedule results.\n\nProvides detailed analysis of task and transport schedules:\n- Gantt chart data\n- Machine utilization breakdown\n- MHV utilization breakdown\n- Idle time analysis\n\nArgs:\n    task_schedule: Task execution records from simulation\n    mhv_schedule: Transport records from simulation\n    machines: Machine definitions\n\nReturns:\n    Detailed schedule analysis\n\nExample:\n    analyze_mps_schedule(\n        task_schedule=[\n            {\"job\": \"A0\", \"task\": \"T1\", \"machine\": \"M1\", \"start_time\": 0, \"end_time\": 20}\n        ],\n        mhv_schedule=[\n            {\"mhv\": \"H1\", \"job\": \"A0\", \"from_machine\": \"M1\", \"to_machine\": \"M2\",\n             \"depart_time\": 20, \"arrive_time\": 35}\n        ],\n        machines=[{\"id\": \"M1\"}, {\"id\": \"M2\"}]\n    )"
    },
    {
      "name": "verify_mps_schedule",
      "description": "Verify a given MPS schedule and calculate its makespan.\n\nThis tool validates a pre-defined schedule against MPS constraints\nand calculates the theoretical makespan. Use this to verify if\nLLM-generated code produces correct results.\n\nThe schedule format includes:\n- jobs: List of job schedules with operations (task, machine, start, end)\n- transports: Optional list of MHV transport events\n- calculated_makespan: Expected makespan (ground truth)\n\nConstraints verified:\n1. Task precedence (operations follow correct order)\n2. Machine eligibility (task runs on valid machine)\n3. Processing time (duration matches task definition)\n4. Disjunctive (no machine overlap)\n\nArgs:\n    schedule: Schedule dictionary with jobs and operations\n    config: Optional MPS configuration. Uses default if not provided.\n\nReturns:\n    Dictionary with:\n    - calculated_makespan: Makespan computed from schedule\n    - expected_makespan: Expected makespan from schedule data\n    - error_percent: Difference percentage\n    - matches: True if matches (within 0.1% tolerance)\n    - constraint_valid: True if all constraints satisfied\n    - constraint_violations: List of any violations\n\nExample:\n    verify_mps_schedule(\n        schedule={\n            \"jobs\": [\n                {\n                    \"job_id\": \"A0\",\n                    \"operations\": [\n                        {\"task\": \"T1\", \"machine\": \"M1\", \"start\": 0, \"end\": 20},\n                        {\"task\": \"T3\", \"machine\": \"M2\", \"start\": 35, \"end\": 65},\n                        {\"task\": \"T4\", \"machine\": \"M2\", \"start\": 65, \"end\": 95},\n                        {\"task\": \"T6\", \"machine\": \"M3\", \"start\": 110, \"end\": 150}\n                    ]\n                }\n            ],\n            \"calculated_makespan\": 150.0\n        }\n    )"
    },
    {
      "name": "get_mps_default_config",
      "description": "Get default MPS configuration (Base Setup from KTH thesis).\n\nReturns the standard 3×2 grid configuration with:\n- 6 machines (M1-M6)\n- 6 tasks (T1-T6)\n- 5 products (A-E)\n- 5 MHVs\n\nThis matches the experimental setup from the KTH Master Thesis (2025).\n\nReturns:\n    Complete MPS configuration dictionary"
    }
  ]
}