{
  "id": "@isdaniel/pgtuner_mcp",
  "displayName": "pgtuner_mcp",
  "description": "provides AI-powered PostgreSQL performance tuning capabilities.  https://github.com/isdaniel/pgtuner_mcp",
  "createdAt": "2026-01-16T12:43:51.027Z",
  "links": {
    "homepage": "",
    "registry": "https://smithery.ai/server/@isdaniel/pgtuner_mcp"
  },
  "connection": {
    "type": "http",
    "runtime": "node",
    "configSchema": {
      "type": "object",
      "required": [
        "database_uri"
      ],
      "properties": {
        "database_uri": {
          "type": "string",
          "description": "PostgreSQL connection string (e.g., postgresql://user:password@host:port/database)"
        }
      },
      "description": "Schema for the /mcp endpoint configuration"
    }
  },
  "capabilities": [
    {
      "name": "get_slow_queries",
      "description": "Retrieve slow queries from PostgreSQL using pg_stat_statements.\n\nReturns the top N slowest queries ordered by total execution time.\nRequires the pg_stat_statements extension to be enabled.\n\nThe results include:\n- Query text (normalized)\n- Total execution time\n- Number of calls\n- Mean execution time\n- Rows returned\n- Shared buffer hits/reads for cache analysis"
    },
    {
      "name": "analyze_query",
      "description": "Analyze a SQL query's execution plan and performance characteristics.\n\nUses EXPLAIN ANALYZE to execute the query and capture detailed timing information.\nProvides analysis of:\n- Execution plan with actual vs estimated rows\n- Timing breakdown by operation\n- Buffer usage and I/O statistics\n- Potential performance issues and recommendations\n\nWARNING: This actually executes the query! For SELECT queries this is safe,\nbut be careful with INSERT/UPDATE/DELETE - use analyze_only=false for those."
    },
    {
      "name": "get_table_stats",
      "description": "Get detailed statistics for database tables.\n\nReturns information about:\n- Table size (data, indexes, total)\n- Row counts and dead tuple ratio\n- Last vacuum and analyze times\n- Sequential vs index scan ratios\n- Cache hit ratios\n\nThis helps identify tables that may need maintenance (VACUUM, ANALYZE)\nor have performance issues."
    },
    {
      "name": "get_index_recommendations",
      "description": "Get AI-powered index recommendations for your database.\n\nAnalyzes your query workload (from pg_stat_statements) and recommends indexes\nthat would improve performance. Uses a sophisticated analysis algorithm that:\n\n1. Identifies slow queries and their access patterns\n2. Extracts columns used in WHERE, JOIN, ORDER BY, and GROUP BY clauses\n3. Generates candidate indexes (single-column and composite)\n4. If HypoPG is available, tests indexes without creating them\n5. Uses a greedy optimization algorithm to select the best index set\n\nThe recommendations consider:\n- Query frequency and total execution time\n- Estimated improvement from each index\n- Index size and maintenance overhead\n- Avoiding redundant indexes"
    },
    {
      "name": "explain_with_indexes",
      "description": "Run EXPLAIN on a query, optionally with hypothetical indexes.\n\nThis tool allows you to see how a query would perform with proposed indexes\nWITHOUT actually creating them. Requires HypoPG extension for hypothetical testing.\n\nUse this to:\n- Compare execution plans with and without specific indexes\n- Test if a proposed index would be used\n- Estimate the performance impact of new indexes\n\nReturns both the original and hypothetical execution plans for comparison."
    },
    {
      "name": "manage_hypothetical_indexes",
      "description": "Manage HypoPG hypothetical indexes for testing.\n\nHypoPG allows you to create \"hypothetical\" indexes that exist only in memory\nand can be used to test query plans without the overhead of creating real indexes.\n\nActions:\n- create: Create a new hypothetical index\n- list: List all current hypothetical indexes\n- drop: Drop a specific hypothetical index\n- reset: Drop all hypothetical indexes\n- estimate_size: Estimate the size of a hypothetical index\n\nThis is useful for:\n- Testing if an index would improve a query\n- Comparing different index strategies\n- Estimating index storage requirements"
    },
    {
      "name": "find_unused_indexes",
      "description": "Find indexes that are not being used or are duplicates.\n\nIdentifies:\n- Indexes with zero or very few scans since last stats reset\n- Duplicate indexes (same columns in same order)\n- Overlapping indexes (one index is a prefix of another)\n\nRemoving unused indexes can:\n- Reduce storage space\n- Speed up INSERT/UPDATE/DELETE operations\n- Reduce vacuum and maintenance overhead"
    },
    {
      "name": "check_database_health",
      "description": "Perform a comprehensive database health check.\n\nAnalyzes multiple aspects of PostgreSQL health:\n- Connection statistics and pool usage\n- Cache hit ratios (buffer and index)\n- Lock contention and blocking queries\n- Replication status (if configured)\n- Transaction wraparound risk\n- Disk space usage\n- Background writer statistics\n- Checkpoint frequency\n\nReturns a health score with detailed breakdown and recommendations."
    },
    {
      "name": "get_active_queries",
      "description": "Get information about currently active queries and connections.\n\nShows:\n- All active queries and their duration\n- Idle transactions that may be holding locks\n- Blocked queries waiting for locks\n- Connection state breakdown\n\nUseful for:\n- Identifying long-running queries\n- Finding queries that might need optimization\n- Detecting stuck transactions\n- Troubleshooting lock contention"
    },
    {
      "name": "analyze_wait_events",
      "description": "Analyze PostgreSQL wait events to identify bottlenecks.\n\nWait events indicate what processes are waiting for:\n- Lock: Waiting for locks on tables/rows\n- IO: Waiting for disk I/O\n- CPU: Waiting for CPU time\n- Client: Waiting for client communication\n- Extension: Waiting in extension code\n\nThis helps identify:\n- I/O bottlenecks\n- Lock contention patterns\n- Resource saturation"
    },
    {
      "name": "review_settings",
      "description": "Review PostgreSQL configuration settings and get recommendations.\n\nAnalyzes key performance-related settings:\n- Memory settings (shared_buffers, work_mem, etc.)\n- Checkpoint settings\n- WAL settings\n- Autovacuum settings\n- Connection settings\n\nCompares against best practices and system resources."
    }
  ]
}